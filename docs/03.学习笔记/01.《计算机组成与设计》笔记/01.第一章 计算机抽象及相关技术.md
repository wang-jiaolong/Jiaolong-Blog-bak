---
title: 第一章 计算机抽象及相关技术
date: 2022-07-23 16:49:48
permalink: /pages/3add7f/
hidden: true
categories: 
  - null
tags: 
  - null
author: 
  name: Jiaolong
  link: https://jiaolong.xyz
---



## 传统的计算应用分类

- 个人计算机：用于个人使用的计算机，通常包含图形显示器、键盘和鼠标。

- 服务器：用于为多个用户并行运行大型程序的计算机，通常只能通过网络访问。

- 超级计算机：具有最高的性能和成本的一类计算机，一般被配置为服务器且通常耗费数千万美元甚至数亿美元。

- 嵌入式计算机：用于运行某预定应用程序或软件集合的计算机，一般内嵌于其他设备中。



## 云计算

云计算接替了传统服务器，它依赖于现在称为仓储级计算机(Warehouse Scale Computer.,WSC)的巨型数据中心。像亚马逊和谷歌这样的公司构建了包含100000台服务器的仓储级计算机，一些公司租用其中的一部分为个人移动设备提供软件服务而无须建立自己的仓储级计算机。事实上，正如个人移动设备和仓储级计算机
正在改变硬件行业一样，通过云计算实现的软件即服务(SaaS)正在彻底改变软件行业。当今的软件开发人员经常会将应用的一部分运行在个人移动设备上，另一部分则部署在云上。

- 软件即服务(SaaS)：通过互联网以服务的方式提供软件和数据，通常是通过一个小型客户端程序（例如运行在本地客户端设备上的浏览器)连接网络以运行程序或获取数据，而不是必须完全在本地设备上安装和运行所有二进制代码。具体的例子包括Web搜索和社交网络。



## 程序性能

理解程序性能程序的性能取决于以下各因素的组合：

- 程序中所用算法的有效性，用来创建程序和将其翻译为机器指令的软件系统，计算机执行这些机器指令（可能包括输入/输出操作)时的有效性。下表总结了软件和硬件是如何影响程序性能的。

![image-20220725105328465](https://s2.loli.net/2022/07/25/OlnLiQNhSW2CEKG.png)

## 计算机体系结构中的8个伟大思想

- 面向摩尔定律的设计：摩尔定律指出单芯片上所集成的晶体管资源每18至24个月翻一番。因此架构设计师的设计需要预测其设计完成时的工艺水平。
- 使用抽象简化设计：使用抽象来表示不同的设计层次——隐藏低层细节以提供给高层一个更简单的模型。
- 加速经常性事件：加速经常性事件(make the common case fast)远比优化罕见情形能够更好地提升性能。

- 通过并行提高性能：自计算诞生以来，计算机架构师就通过并行计算操作来获得更高性能。

- 通过流水线提高性能：并行性的一种特殊场景在计算机体系结构中非常普遍，因此它有着专有名称：流水线(pipelining)。
- 通过预测提高性能：遵照谚语“请求宽恕胜于寻求许可”，下一个伟大思想就是预测。在某些情况下，假设从预测错误中恢复的代价并不高，且预测相对准确，则平均来说进行预测并开始工作可能会比等到明确结果后再执行更快。
- 存储层次：在存储层次中，速度最快、容量最小并且每位价格最昂贵的存储器处于顶层，而速度最慢、容量最大且每位价格最便宜的存储器处于底层。
- 通过冗余提高可靠性：计算机不仅要速度快，更需要工作可靠。由于任何物理设备都可能发生故障，因此我们通过引入冗余组件来使系统可靠，该组件在系统发生故障时可以替代失效组件并帮助检测故障。



## 系统软件

<img src="https://s2.loli.net/2022/07/25/DMouqziF9bVvxtL.png"  />

**操作系统**

> 操作系统：为了使程序更好地在计算机上运行而管理计算机资源的监控程序。

操作系统(operating system)是用户程序和硬件之间的接口，为用户提供各种服务和监控功能。操作系统最为重要的作用是：

- 处理基本的输人和输出操作。
- 分配外存和内存。
- 为多个应用程序提供共享计算机资源的服务。

**编译器**

> 编译器：将高级语言翻译为计算机所能识别的机器语言的程序。

编译器(compiler)完成另外一项重要功能：把高级语言（如C、C++、Java或Visual Basic等)编写的程序翻译成硬件能执行的指令。这个翻译过程是相当复杂的，这里仅作简要介绍，第2章将作深入介绍。

## 从高级语言到硬件语言

第一代程序员是直接使用二进制数与计算机通信的，这是一项非常乏味的工作。所以他们很快发明了助记符，以符合人类的思维方式。最初助记符是手工翻译成二进制的，其过程显然过于烦琐。随后设计人员开发了一种称为汇编器(assembler)的软件，可以将助记符形式的指令自动翻译成对应的二进制。即汇编语言，而机器可以理解的二进制语言是机器语言。而我们现在更多的是使用高级编程语言，大大提高了软件的效率。

> - 汇编器(assembler)：将指令由助记符形式翻译成二进制形式的程序。
>
> - 汇编语言：以助记符形式表示的机器指令。
> - 机器语言：以二进制形式表示的机器指令。
> - 高级编程语言：如C、C+、Java、Visual Basic等可移植的语言，由一些单词和代数符号组成，可以由编译器转换为汇编语言。

![image-20220725135315586](https://s2.loli.net/2022/07/25/YJStCxLMpj3EkbH.png)

## 箱盖后的硬件

输入设备(input device)：如麦克风

输出设备(output device)：如扬声器，显示器

组成计算机的五个经典部件是输入、输出、存储器、数据通路（在计算机中也称运算器）和控制器，其中后两个部件通常合称为处理器。

- CPU
  - 数据通路(datapath)负责完成算术运算。
  - 控制器(control)负责指导数据通路、存储器和I/O设备按照程序的指令正确执行。
- 存储器
  - 内存由DRAM（动态随机访问存储器）组成，用来承载程序的指令和数据。DRAM可随机访问任何地址的内存。
  - 高速缓存：高速缓存是一种小而快的存储器，一般作为大而慢的存储器的缓冲。一般采用SRAM技术，比DRAM更快，集成度更低。



**指令系统体系结构**：也叫体系结构，是低层次软件和硬件之间的抽象接口，包含了需要编写正确运行的机器语言程序所需要的全部信息，包括指令、寄存
器、存储器访问和I/O等。

## 性能

- 响应时间：也叫执行时间(execution time),是计算机完成某任务所需的总时间，包括硬盘访问、内存访问、O活动、操作系统开销和CPU执行时间等。

- 吞吐率：也叫作带宽(band-width).性能的另一种度量参数，表示单位时间内完成的任务数量。

> 为了避免对术语增加和减少的潜在误解，当我们想说“改善性能”和“改善执行时间”的时候，通常说“增加性能”和“减少执行时间”。





::: tip CPU性能公式

CPU时间 = 指令数 * CPI * 时钟周期长度

:::

![image-20220725143842451](https://s2.loli.net/2022/07/25/eDToVbYQacUgutm.png)

> CPI（指令平均时钟周期数）：表示执行某个程序或者程序片段时每条指令所需的时钟周期平均数。



## SPEC CPU基准评测程序

SPEC(System Performance Evaluation Cooperative)是由许多计算机销售商共同出资赞助并支持的合作组织，目的是为现代计算机系统建立基准评测程序集。1989年，SPEC建立了重点面向处理器性能的基准程序集（现在称为SPEC89)。





## 小结

硬件和软件设计者都采用分层的方法构建计算机系统，每个下层都对其上层隐藏本层的细节。最重要的抽象层次是硬件和底层软件之间的接口，称为指令系统体系结构。
